<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Bootstrap demo</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary py-0">
      <div class="container-fluid bg-dark text-light">
        <a class="navbar-brand text-light" href="homepage.html">Home</a>
        <a class="navbar-brand text-light" href="backoffice.html">Backoffice</a>
      </div>
    </nav>

    <div class="card mb-3">
      <div class="row g-0" id="detailContainer">
        <!-- <div class="col-md-4">
            <img src="nokia.webp" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h5 class="card-title">Card title</h5>
              <p class="card-text">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
              <p class="card-text"><small class="text-body-secondary">Last updated 3 mins ago</small></p>
            </div>
          </div> -->
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
      crossorigin="anonymous"
    ></script>
    <script>
      const url = 'https://striveschool-api.herokuapp.com/api/product/';
      const authToken =
        'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2NGVhNGM3NjUxNWY0MTAwMTQ2OTdhMzEiLCJpYXQiOjE2OTMwNzY1OTgsImV4cCI6MTY5NDI4NjE5OH0.aIih90mETdq1JH7CGA35ISTxmFJ7OgtfQRPI9EOYrog';
      const singleProductId = new URLSearchParams(window.location.search).get('singleProductId');
      //console.log(singleProductId);

      window.onload = async () => {
        const resp = await fetch(url + singleProductId, {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${authToken}`,
            //added authorization header to my list of headers
            //this will be sent to the server "POST"
          },
        });
        const eventObj = await resp.json();
        //console.log(eventObj);
        const { name, brand, description, price, createAt } = productObj;
        console.log(productObj);
        const container = document.getElementById('detailContainer');
        const div = document.createElement('div');
        div.innerHTML = `<div class="col-md-4">
            <img src="nokia.webp" class="img-fluid rounded-start" alt="...">
          </div>
          <div class="col-md-8">
            <div class="card-body">
              <h4 class="card-title">${name}</h4>
              <p class="card-text">T${brand}</</p>
              <p class="card-text"><small class="text-body-secondary">${description}</</small></p>
              <h4 class="card-title">${price}</h4>
              </div>
          </div>`;

        container.appendChild(div);
      };

      /*     window.onload = () => {
        fetch(url + singleProductId), {
          method: 'GET',
          headers: {
            'Content-Type': 'application/json',
            Authorization: `Bearer ${authToken}`,
          },
        })
          .then((response) => {
            if (response.ok) {
              return response.json();
            }
          })
          .then((data) => {
            console.log(data);

            const keys = Object.keys(data);

            keys.forEach((key) => {
              const detailContainer = document.getElementById('detailContainer');

              detailContainer.innerHTML += ;
            });
          })
          .catch((err) => console.log(err));
      }; */
    </script>
  </body>
</html>
